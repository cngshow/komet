

  <div id="komet_preferences_tabs" role="tab">
    <ul>
      <li><a href='#useroptions'>Options</a></li>
      <li><a href='#color-module'>Color Module</a></li>
      <li><a href='#colorpath-module'>Color Path</a></li>
      <li><a href='#komet_preferences_refsets_colors'>Color Refsets</a></li>
    </ul>
    <div id="useroptions">
      <form>
        <div style="height: 45px">
         <input id="stampedDt" type="hidden" value="<%@stamp_date%>">
          <div style="font-weight: bold; width: 40%; text-align: right; vertical-align: middle; float: left">Select Language:&nbsp;&nbsp;</div>
          <div style="width: 60%; float: right">
            <select id="komet_concept_language" class="form-control" aria-label="Select Language" aria-expanded="true" role="listbox">
              <% @language_options.each do |type| %>
                  <% if @languageCoordinate == type[:concept_sequence] %>
                  <option selected value="<%= type[:concept_sequence] %>"><%= type[:text] %></option>
                  <%else%>
                      <option  value="<%= type[:concept_sequence] %>"><%= type[:text] %></option>
                  <% end %>
              <% end %>
            </select>           </div>
        </div>
        <div style="height: 45px">
          <div id="stamp_date_label" style="font-weight: bold; width: 40%; text-align: right; vertical-align: middle; float: left">STAMP as of Date:&nbsp;&nbsp;</div>
          <div style="width: 60%; float: right">
            <div class='input-group date' id='stamp_date'>
              <input type='text' class="form-control" aria-labelledby="stamp_date_label">
              <span class="input-group-addon">
                <span class="fa fa-calendar"></span>
              </span>
            </div>
          </div>
        </div>
        <br><br>

        <table id="description_type" width='80%' style="z-index:990" cellpadding='2' cellspacing='3'>
          <tr id="heading1" style="background-color: #0000a2;color:white">
            <td>Rank</td>
            <td>Description Type</td>
          </tr>
          <% descriptioncounter = descriptioncounter.to_i  -%>
          <% @description_type_options.each do |type| %>
          <% descriptioncounter = descriptioncounter + 1 -%>
          <tr id="Tr<%=descriptioncounter %>"  data-cnt="<%=descriptioncounter%>">
            <td><a style="cursor: default"  class="change-rank up" data-icon="&#9650;"></a>&nbsp<a  style="cursor: default"   class="change-rank down" data-icon="&#9660;"></a></td>
            <td><%= type[:text] %></td>
            <td><input   type="hidden" name="description_type" id="rank_<%=descriptioncounter %>" size="2" value="<%= type[:concept_sequence] %>" /></td>
          </tr>
          <% end %>
       </table>
        <br><br>

        <table id="dialecttbl" width='80%' style="z-index:990" cellpadding='2' cellspacing='3'>
          <tr id="heading2" style="background-color: #0000a2;color:white">
            <td>Rank</td>
            <td>Dialect Preference</td>
          </tr>


         <% dialect_optionscounter = dialect_optionscounter.to_i  -%>
          <% @dialect_options.each do |type| %>
              <% dialect_optionscounter = dialect_optionscounter + 1 -%>
                  <tr id="Tr<%=dialect_optionscounter %>"  data-cnt="<%=dialect_optionscounter%>">
                    <td><a style="cursor: default"  class="change-rank up" data-icon="&#9650;"></a>&nbsp<a  style="cursor: default"   class="change-rank down" data-icon="&#9660;"></a></td>
                    <td><%= type[:text] %></td>
                    <td><input   type="hidden" name="dialecttbl" id="rank_<%=dialect_optionscounter%>" size="2" value="<%= type[:concept_sequence] %>" /></td>
                  </tr>

          <% end %>
        </table>

        <br><br>

        <div>
          <fieldset  width='60%'>
            <div width='60%' style="background-color: #0000a2;color:white;z-index:990">Status</div>
            <legend style="width: 0px;height:0px">&nbsp;</legend>

                <input type="radio" name="status" aria-checked="false" <%=@allowedstatesActive%> aria-label="Active" role="radio" value="Active">Active<br>
                <input type="radio" name="status" aria-checked="false" <%=@allowedstatesinactive%> aria-label="Inactive" role="radio" value="Inactive">InActive<br>
                <input type="radio" name="status" aria-checked="false" aria-label="Active,Inactive" role="radio" <%=@allowedstatesboth%> value="Active,Inactive">Both<br>

          </fieldset>
        </div>
      </form>
    </div>
    <div id="color-module" style="height: 650px;">
      <div>Please click on <span style="color: red; ">X</span> to clear color</div>
      <table id="listofmodule" width='90%' cellpadding='2' border='0' cellspacing='3'>
        <tr id="colorheading" style="background-color: #0000a2;color:white">
          <td>Module</td>
          <td>Color</td>
          <td>Shape</td>
        </tr>
        <% @colormoduleshape.each do |type| %>
            <tr id="colorTr<%= type[:modulecolorid]%>">
              <td id="lbl_colorpathtr_<%= type[:modulecolorid]%>"> <%= type[:modulecolortext]%></td>
              <% label = "lbl_colorTr_#{ type[:modulecolorid] }"
                 colorrowid = "'#{type[:modulecolortext]}~#{ type[:modulecolorid] }','colorTr#{ type[:modulecolorid] }'"
                 shapeCntlId =  "colormoduleshape#{ type[:modulecolorid] }"
                 displayShapeDiv =  "cshape_#{ type[:modulecolorid] }"
              %>
              <td>
                <a title="clear color" style="padding:2px;color:red" aria-labelledby="<%=label %>" onclick="PreferenceModule.removecolor(<%= colorrowid %>);PreferenceModule.setShape('None','None','<%=displayShapeDiv%>','<%=shapeCntlId%>')">X</a>&nbsp;
                <input name="color_id" class="demo" title="Click here to change color" aria-labelledby="<%=label %>" type="text"  id="<%= type[:modulecolortext]%>~<%= type[:modulecolorid]%>" size="6" style="height:30px" data-control="hue" value="<%= type[:modulecolorvalue]%>" />
              </td>
              <td>

                <div class="dropdown" ><div class="<%= type[:modulecolorshape]%>" style="display: inline-block" id="<%=displayShapeDiv%>"><%= type[:colorshapename]%> </div>
                  <input name="colormodule_shape" value="<%= type[:modulecolorshape]%>"  type="hidden" id="<%=shapeCntlId%>"  />
              <span  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" id="shapeid" aria-expanded="false">
              <span class="caret"></span></span><ul class="dropdown-menu"   aria-label="select shape">
                  <li><a style="display: inline-block" onclick="PreferenceModule.setShape('None','None','<%=displayShapeDiv%>','<%=shapeCntlId%>')" href="#">None</a></li>
                  <li aria-hidden="true"  class="glyphicon glyphicon-stop" ><a style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-stop','Square','<%=displayShapeDiv%>','<%=shapeCntlId%>')" href="#">Square</a></li>
                  <li aria-hidden="true" class="glyphicon glyphicon-star"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-star','Star','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Star</a></li>
                  <li aria-hidden="true" class="glyphicon glyphicon-triangle-top"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-triangle-top','Triangle','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Triangle</a></li>
                  <li aria-hidden="true" class="glyphicon glyphicon-asterisk"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-asterisk','Asterisk','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Asterisk</a></li>
                  <li aria-hidden="true" class="fa fa-circle"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('fa fa-circle','Circle','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Circle</a></li>
                </ul></div>

              </td>
            </tr>
        <% end %>
      </table>
    </div>
    <div id="colorpath-module" style="height: 450px;">
      <div>Please click on <span style="color: red; ">X</span> to clear color</div>
      <table id="listofpath" width='90%' cellpadding='2' cellspacing='3'>
        <tr id="colorpathheading" style="background-color: #0000a2;color:white">
          <td>Path</td>
          <td>Color</td>
          <td>Shape</td>
        </tr>

        <% @colorpathshape.each do |type| %>
            <tr id="colorpathtr<%= type[:pathcolorid]%>">
            <td id="lbl_colorpathtr_<%= type[:pathcolorid]%>"> <%= type[:pathcolortext]%></td>
            <% label = "lbl_colorpathtr_#{ type[:pathcolorid] }"
               colorrowid = "'#{type[:pathcolortext]}~#{ type[:pathcolorid] }','colorpathtr#{ type[:pathcolorid] }'"
               shapeCntlId =  "colorpathshape#{ type[:pathcolorid] }"
               displayShapeDiv =  "cpathshape_#{ type[:pathcolorid] }"  %>
            <td>
              <a title="clear color" style="padding:2px;color:red" aria-labelledby="<%=label %>" onclick="PreferenceModule.removecolor(<%= colorrowid %>);PreferenceModule.setShape('None','None','<%=displayShapeDiv%>','<%=shapeCntlId%>')">X</a>&nbsp;
              <input name="colorpath" class="pathcolordemo" title="Click here to change color" aria-labelledby="<%=label %>" type="text"  id="<%= type[:pathcolortext]%>~<%= type[:pathcolorid]%>" size="6" style="height:30px" data-control="hue" value="<%= type[:pathcolorvalue]%>" />
            </td>
            <td>
             <div class="dropdown" ><div class="<%= type[:pathcolorshape]%>" style="display: inline-block" id="<%=displayShapeDiv%>"><%= type[:colorshapename]%> </div>
             <input name="colormodule_shape" value="<%= type[:pathcolorshape]%>"  type="hidden" id="<%=shapeCntlId%>"  />
              <span  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" id="shapeid" aria-expanded="false">
              <span class="caret"></span></span><ul class="dropdown-menu"   aria-label="select shape">
              <li><a style="display: inline-block" onclick="PreferenceModule.setShape('None','None','<%=displayShapeDiv%>','<%=shapeCntlId%>')" href="#">None</a></li>
              <li aria-hidden="true"  class="glyphicon glyphicon-stop" ><a style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-stop','Square','<%=displayShapeDiv%>','<%=shapeCntlId%>')" href="#">Square</a></li>
              <li aria-hidden="true" class="glyphicon glyphicon-star"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-star','Star','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Star</a></li>
              <li aria-hidden="true" class="glyphicon glyphicon-triangle-top"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-triangle-top','Triangle','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Triangle</a></li>
              <li aria-hidden="true" class="glyphicon glyphicon-asterisk"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-asterisk','Asterisk','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Asterisk</a></li>
              <li aria-hidden="true" class="fa fa-circle"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('fa fa-circle','Circle','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Circle</a></li>
              </ul></div>

            </td>
            </tr>
        <% end %>


      </table>
    </div>

    <div id="komet_preferences_refsets_colors" style="height: 450px;">
      <table border="0" style="display: inline-block ">
        <tr>

          <td style="width: 30%">
            <label  for="komet_preferences_refset_id">Select Refset: </label>
            <select style="width:270px"  id="komet_preferences_refset_id">

              <% @processed_refsets.each do |type| %>
                      <option  value="<%= type[0] %>"><%= type[1] %></option>
              <% end %>
            </select>
          </td>
          <td style="padding-left: 5px;text-align: center;margin-left: 2px">
            &nbsp;&nbsp;<input name="refsetcolor_id" class="demo" title="Click here to change color" aria-label="Change color" type="hidden" id="color_id" size="1" style="height:25px" data-control="hue" value=""/>
          </td>
          <td>
            <%shapeCntlId =  "colorrefsetshape"
             displayShapeDiv =  "crefsetshape_0" %>

            <div class="dropdown" ><div class="none" style="display: inline-block" id="<%=displayShapeDiv%>">none </div>
              <input name="colormodule_shape" value="none"  type="hidden" id="<%=shapeCntlId%>"  />
              <span  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" id="shapeid" aria-expanded="false">
              <span class="caret"></span></span><ul class="dropdown-menu"   aria-label="select shape">
              <li><a style="display: inline-block" onclick="PreferenceModule.setShape('None','None','<%=displayShapeDiv%>','<%=shapeCntlId%>')" href="#">None</a></li>
              <li aria-hidden="true"  class="glyphicon glyphicon-stop" ><a style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-stop','Square','<%=displayShapeDiv%>','<%=shapeCntlId%>')" href="#">Square</a></li>
              <li aria-hidden="true" class="glyphicon glyphicon-star"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-star','Star','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Star</a></li>
              <li aria-hidden="true" class="glyphicon glyphicon-triangle-top"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-triangle-top','Triangle','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Triangle</a></li>
              <li aria-hidden="true" class="glyphicon glyphicon-asterisk"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('glyphicon glyphicon-asterisk','Asterisk','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Asterisk</a></li>
              <li aria-hidden="true" class="fa fa-circle"><a href="#" style="display: inline-block" onclick="PreferenceModule.setShape('fa fa-circle','Circle','<%=displayShapeDiv%>','<%=shapeCntlId%>')">Circle</a></li>
            </ul></div>

             </td>
          <td><input name="applybtn" id="applybtn" type="button" value="Apply"/></td>
        </tr>
      </table>
      <BR><BR>
      <table width="90%" cellpadding="5" cellspacing="0" id="komet_preferences_refsets_table">
        <tr style="background-color: #0000a2;color:white">
          <td>ID</td>
          <td>Color</td>
          <td>Shape</td>
          <td>Refset</td>
          <td>Delete</td>
        </tr>
        <%if !@colorrefsetnew.nil?
              rcounter = rcounter.to_i
          @colorrefsetnew.each do |refsets|
              rcounter = rcounter + 10000%>

            <tr id="tr<%=rcounter %>">
              <td> <%=refsets[:refsetsid]%></td>
                <td style="border:outset 1px black;width:15px;background-color:<%=refsets[:refsetcolorvalue]%>">&nbsp;
                <input name="colorrefsets"  type="hidden" id="<%=refsets[:refsetsid]%>~<%=refsets[:refsetsid]%>~<%=refsets[:colorshapename]%>" size="6" style="height:30px" data-control="hue" value="<%=refsets[:refsetcolorvalue]%>"  /></td>
              <td style="text-align: center" ><div  class="<%=refsets[:refsetcolorshape]%>"></div></td>
              <td> <%=refsets[:refsets_name]%></td>
              <td style="text-align: center" ><a tooltip="remove refset" name="removeRow" onclick="PreferenceModule.deleteRefsetFieldRow(<%=rcounter %>)">X</a></td>
            </tr>
        <% end

        end%>
      </table>
    </div>
  </div>

<script>
  $(document).ready(function () {
    $("#komet_preferences_tabs").tabs();
    $('.pathcolordemo').minicolors();
    $('.demo').minicolors();
    PreferenceModule.initialize();


  });
</script>