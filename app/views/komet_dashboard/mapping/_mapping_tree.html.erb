<div class="panel panel-default komet-no-margins komet-panel" id="komet_mapping_tree_panel">
  <fieldset>
    <legend style="width: 0px;height:0px">&nbsp;</legend>
    <div class="panel-heading">

        <span class="panel-title komet-section-title">

        </span>

        <div class="komet-panel-tools">

            <!--<input id="komet_mapping_tree_text_filter" name="komet_mapping_tree_text_filter" class="form-control" placeholder="Filter..."/>

            <select id="komet_mapping_tree_set_filter" name="komet_mapping_tree_set_filter" class="form-control">
                <option value="">All Mapping Sets</option>
                <option value="snomed">SNOMED Sets</option>
                <option value="loinc">LOINC Sets</option>
                <option value="vhat">VHAT Sets</option>
            </select>-->

            <div class="komet-panel-tools-control">
                <div class="btn-group" data-toggle="buttons">
                    <label class="btn btn-default" for="komet_mapping_tree_state_active">
                        <input type="radio" name="komet_mapping_tree_states_to_view" id="komet_mapping_tree_state_active" value="active" autocomplete="off" title="Show Only Active Concepts"> Active
                    </label>
                    <label class="btn btn-default" for="komet_mapping_tree_state_inactive">
                        <input type="radio" name="komet_mapping_tree_states_to_view" id="komet_mapping_tree_state_inactive" value="inactive" autocomplete="off" title="Show Only Inactive Concepts"> Inactive
                    </label>
                    <label class="btn btn-default" for="komet_mapping_tree_state_both">
                        <input type="radio" name="komet_mapping_tree_states_to_view" id="komet_mapping_tree_state_both" value="active,inactive" autocomplete="off" title="Show Active and Inactive Concepts"> Both
                    </label>
                </div>
            </div>

            <button type="button" class="komet-link-button" onclick="MappingModule.tree.reloadTree(MappingModule.getTreeViewParams());" title="Reload Mapping Tree" aria-label="Reload Mapping Tree">
                <div id="komet_mapping_tree_reload" alt="Reload Mapping Tree" class="komet-action-icon fa fa-refresh" ></div>
            </button>

        </div>

    </div>
  </fieldset>
    <div class="panel-body">

        <div id="komet_mapping_tree"></div>

    </div>

</div>

<script>

    $(document).ready(function () {

        var statesToView = $("#komet_mapping_tree_panel").find("input[name='komet_mapping_tree_states_to_view']");

        statesToView.change(function(){

            MappingModule.toggleTreeStatesToView(statesToView, this.value);
            MappingModule.setTreeStatesToView(this);
        });

        MappingModule.toggleTreeStatesToView(statesToView, "<%= @view_params[:allowedStates] %>");
        MappingModule.initialize();
    });

</script>