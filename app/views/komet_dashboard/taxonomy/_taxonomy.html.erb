<div class="panel panel-default komet-no-margins komet-panel" id="komet_taxonomy_panel">

  <div class="panel-heading">
    <div class="komet-panel-tools">
      <label for="komet_taxonomy_stated_inferred">Toggle Stated/Inferred View</label>
      <select name="komet_taxonomy_stated_inferred" id="komet_taxonomy_stated_inferred" class="form-control komet-stated-inferred" onchange="setStatedView(this)">
        <option value="true" selected="selected">Stated</option>
        <option value="false">Inferred</option>
      </select>
      <div class="glyphicon glyphicon-refresh" onclick="TaxonomyModule.tree.reloadTreeStatedView(TaxonomyModule.getStatedView(), false)" title="Refresh"></div>

    </div>

  </div>
</div>

<div id='taxonomy_tree'></div>

<script>

  $(document).ready(function () {

    $("#komet_taxonomy_stated_inferred option").filter(function() {
      return $(this)[0].value == "<%= @stated %>";
    }).prop('selected', true);

    WindowManager.initialize();
    TaxonomyModule.initialize();
    ConceptsModule.initialize();
  });

  function setStatedView(field){
    TaxonomyModule.tree.reloadTreeStatedView(field.value);
  }
</script>