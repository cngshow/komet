<div class="panel panel-default komet-no-margins komet-panel" id="komet_taxonomy_panel">
  <fieldset>
    <div class="panel-heading">
        <div class="komet-panel-tools">
            <legend style="width: 0px;height:0px">&nbsp;</legend>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-default" for="komet_taxonomy_stated">
                    <input type="radio" name="komet_taxonomy_stated_inferred" id="komet_taxonomy_stated" value="true" autocomplete="off" title="Stated View"> Stated
                </label>
                <label  class="btn btn-default" for="komet_taxonomy_inferred">
                    <input type="radio" name="komet_taxonomy_stated_inferred"  id="komet_taxonomy_inferred" value="false"  autocomplete="off" title="Inferred View"> Inferred
                </label>
            </div>

            <button type="button" class="komet-link-button" aria-label="Refresh Taxonomy Tree"  onclick="TaxonomyModule.tree.reloadTree(TaxonomyModule.getViewParams(), false);" title="Refresh Taxonomy Tree">
                <div class="glyphicon glyphicon-refresh"   title="Refresh Taxonomy Tree"></div>
            </button>

        </div>

    </div> </fieldset>
</div>

<div id='taxonomy_tree'></div>

<script>

    $(document).ready(function () {

        var stated = $("#komet_taxonomy_panel").find("input[name='komet_taxonomy_stated_inferred']");

        stated.change(function(){

            stated.parent().toggleClass("btn-primary btn-default");
            TaxonomyModule.reloadTree();
        });

        // since the stated buttons are in an initial state, loop through them to select the correct default value and set styles appropriately
        stated.each(function(index, button){

             if (button.value == "<%= @view_params[:stated] %>"){

                 var buttonParent = button.parentElement;

                 button.checked = true;
                 buttonParent.classList.add('btn-primary');
                 $(buttonParent).removeClass("btn-default");
             }
        });

        WindowManager.initialize();
        TaxonomyModule.initialize();
        ConceptsModule.initialize();
    });
</script>